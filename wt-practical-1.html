<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Web Tech Lab - Experiment 1</title>
    <style>
        /* Modern UI Styling */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: #f4f7f6; color: #333; line-height: 1.6; }
        .container { display: grid; grid-template-columns: 1fr 1fr; min-height: 100vh; }

        /* Left Panel: Theory */
        .left-panel { background: #ffffff; padding: 40px; overflow-y: auto; border-right: 4px solid #007bff; }
        .theory-section { margin-bottom: 30px; padding: 20px; border-radius: 10px; background: #e9ecef; }
        h1, h2 { color: #007bff; margin-bottom: 15px; }
        
        /* Right Panel: Interactive Preview & Code */
        .right-panel { background: #1e1e1e; color: #d4d4d4; padding: 40px; overflow-y: auto; }
        .preview-box { background: white; color: black; padding: 20px; border-radius: 8px; margin-bottom: 20px; min-height: 200px; }
        
        /* Code Block Styling */
        .code-block { background: #000; padding: 20px; border-radius: 8px; font-family: 'Consolas', monospace; color: #9cdcfe; overflow-x: auto; border: 2px solid transparent; transition: 0.3s; }
        .code-block:focus { outline: none; border-color: #007bff; background: #0d0d0d; }
        #code-output { white-space: pre-wrap; }
        
        .action-btn { background: #28a745; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; margin: 5px; }
        .action-btn:hover { background: #218838; }
        .compile-btn { background: #17a2b8; display: none; } /* Hidden until Edit Mode is active */
    </style>
</head>
<body>
    <div class="container">
        <div class="left-panel">
            <h1>Experiment 1: College Web Page</h1>
            <div class="theory-section">
                <h2>üéØ Aim</h2>
                <p>Design web pages for your college containing a description of courses, departments, and library using <strong>Links</strong> and <strong>Lists</strong>.</p>
            </div>

            <div class="virtual-lab">
                <h2>üõ†Ô∏è Interactive Builder</h2>
                <p>Click the buttons to "build" or manually edit code:</p>
                <button class="action-btn" onclick="addHeading()">1. Add Heading</button>
                <button class="action-btn" onclick="addList()">2. Add Departments</button>
                <button class="action-btn" onclick="addLink()">3. Add College Link</button>
                <button class="action-btn" style="background:#6f42c1" onclick="enableEditing()">4. Custom Edit</button>
                <button id="run-btn" class="action-btn compile-btn" onclick="compileCode()">üöÄ Run Code</button>
                
                <button class="action-btn" style="background:#dc3545" onclick="resetPreview()">Reset</button>
            </div>
        </div>

        <div class="right-panel">
            <h2>Live Component Preview</h2>
            <div class="preview-box" id="preview-box">
                <em>Your page preview will appear here...</em>
            </div>

            <h2>Reference Source Code</h2>
            <div class="code-block" id="code-container">
<pre id="code-output" contenteditable="false">
&lt;!-- Code will update as you build --&gt;
</pre>
            </div>
            <p id="edit-status" style="font-size: 0.8rem; margin-top: 5px; color: #888;"></p>
        </div>
    </div>

    <script>
        const preview = document.getElementById('preview-box');
        const codeOut = document.getElementById('code-output');
        const runBtn = document.getElementById('run-btn');
        const status = document.getElementById('edit-status');
        let currentCode = "";

        function updateDisplay(htmlPart) {
            if (preview.innerHTML.includes("em")) preview.innerHTML = "";
            preview.innerHTML += htmlPart;
            currentCode += htmlPart + "\n";
            codeOut.innerText = `<!DOCTYPE html>\n<html>\n<body>\n${currentCode}</body>\n</html>`;
        }

        function addHeading() {
            updateDisplay("<h1>Welcome to GTU College</h1>");
        }

        function addList() {
            updateDisplay("<h3>Our Departments</h3>\n<ul>\n  <li>Electronics & Comm.</li>\n  <li>Computer Engineering</li>\n</ul>");
        }

        function addLink() {
            updateDisplay("<a href='https://www.gtu.ac.in'>Visit Official Site</a>");
        }

        // --- NEW FUNCTIONS ---

        function enableEditing() {
            codeOut.contentEditable = "true";
            codeOut.focus();
            runBtn.style.display = "inline-block";
            status.innerText = "‚ú® Edit mode active! Modify the code and click 'Run Code'.";
            status.style.color = "#9cdcfe";
        }

        function compileCode() {
            // Get text from the editable area
            const editedCode = codeOut.innerText;
            
            // Logic to extract content between <body> and </body> if user kept the tags
            // Otherwise, just render the whole content
            let bodyContent = editedCode;
            if (editedCode.includes("<body>") && editedCode.includes("</body>")) {
                bodyContent = editedCode.split("<body>")[1].split("</body>")[0];
            }

            preview.innerHTML = bodyContent;
            status.innerText = "‚úÖ Preview updated successfully!";
            status.style.color = "#28a745";
        }

        function resetPreview() {
            preview.innerHTML = "<em>Your page preview will appear here...</em>";
            codeOut.innerText = "";
            codeOut.contentEditable = "false";
            currentCode = "";
            runBtn.style.display = "none";
            status.innerText = "";
        }
    </script>
</body>
</html>
